/* =========================
   Design Tokens
========================= */
:root{
  --bg:#ffffff; --card:#f9f9f9; --text:#111; --muted:#666;
  --accent:#4f46e5; --accent-600:#4338ca;
  --border:#ddd; --border-strong:#c7c7c7;
  --thead:#f0f0f0; --row:#fff; --row-alt:#fafafa;
  --grid:#e3e3e3; --row-hover:#f5f7ff;
  --warn-bg:#fff8db; --warn-border:#f0e2a0;
  --danger:#d00;
}

/* =========================
   Base & Typography
========================= */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,
    "Apple SD Gothic Neo","Noto Sans KR","맑은 고딕",sans-serif;
}
a{color:inherit; text-decoration:none}
.small{color:var(--muted); font-size:12px}
.right{margin-left:auto}

/* =========================
   TITLE
========================= */

/* === BASE HEADING === */
h1 {
  position: relative;
  padding: 0;
  margin: 0;
  font-family: "Raleway", sans-serif;
  font-weight: 300;
  font-size: 40px;
  color: #080808;
  -webkit-transition: all 0.4s ease 0s;
  -o-transition: all 0.4s ease 0s;
  transition: all 0.4s ease 0s;
}
h1 span { display:block; font-size:0.5em; line-height:1.3; }
h1 em   { font-style:normal; font-weight:600; }

/* === HEADING STYLE #4 === */
.brand h1 { text-align:center; padding-bottom:0.7em; }
.brand h1 span{
  font-weight:300; word-spacing:3px; line-height:1em;
  padding-bottom:-0.35em; color:rgba(0,0,0,0.5);
}
.brand h1:before{
  position:absolute; left:50%; bottom:0; width:60px; height:1px;
  content:""; margin-left:-30px; background-color:#777;
}

.paneltitle{
  font-size:16px; font-weight:500; margin:0 0 8px; color:var(--text);
  border-left:3px solid var(--accent); padding-left:8px; line-height:1.4;
}

/* 숫자 가독성 (탭ular 숫자) */
.tbl th,.tbl td{font-variant-numeric:tabular-nums}

/* =========================
   Layout & Utilities
========================= */
.container{max-width:none; width:96vw; margin:32px auto; padding:16px}
.panel{background:var(--card); border:1px solid var(--border-strong); border-radius:14px; padding:14px}
.panel + .panel{margin-top:12px}
.panel + .spacer{height:12px}
.panel-footer{font-size:small}
.note{background:var(--warn-bg); border:1px solid var(--warn-border); padding:10px; border-radius:8px; margin-top:8px}
.hint{margin-bottom:12px;margin-top:4px;font-size:13px;color:#666;line-height: 160%;}

.grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
.grid > *{min-width:0}

/* 카드형 그리드(홈/KPI) */
.grid.cards{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px}
@media (max-width:800px){.grid,.grid.cards{grid-template-columns:1fr}}

/* =========================
   Form Controls
========================= */
.controls{
  display:flex; justify-content:flex-start; gap:8px; flex-wrap:wrap;
}
.left-group,.right-group{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
@media (max-width:960px){
  .right-group{margin-left:0; width:100%; align-items:right; justify-content:flex-end}
  .left-group{width:100%}
}

input[type="text"],input[type="file"],input[type="date"],input[type="number"],input[type="month"],select{
  padding:8px 10px; border:1px solid var(--border); border-radius:10px; background:#fff; color:var(--text); font-size:14px
}
textarea{
  width:100%; min-height:220px; padding:12px; border:1px solid var(--border); border-radius:10px; background:#fff; color:var(--text);
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
}
@media (max-width:768px){ textarea{min-height:180px} }
@media (max-width:480px){ textarea{min-height:160px} }

/* 전역: 기본 리셋/공통 스타일만 */
.controls select{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
}

/* 집계기준 전용 화살표 */
#quick-buttons select.sel,
#mode.sel{
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z' fill='%234f46e5'/%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 12px center; background-size:20px; padding-right:40px;
}

/* ===== Auth (로그인) ===== */
.auth-wrap{
  min-height:100vh; display:flex; align-items:center; justify-content:center; background:#f5f5f5;
}
.login-box{
  background:#fff; padding:24px; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.1);
  width:100%; max-width:320px;
}
.form-auth h2{margin:0 0 12px}
.form-auth input[type="password"], .form-auth button{
  width:100%; display:block; padding:10px; font-size:14px; margin:8px 0 12px; border:1px solid var(--border); border-radius:8px;
}
.form-auth button{border:0; background:#111; color:#fff; cursor:pointer; margin-top:0}
.form-auth .error{color:#c00; margin:8px 0 0; font-size:13px}
.form-auth .hint{margin-top:10px; font-size:12px; color:#666}

/* =========================
   Buttons
========================= */
.btn{padding:10px 14px; border:1px solid var(--border); background:#ffffff; color:var(--text); border-radius:10px; cursor:pointer}
.btn:hover{background:#eaeaea}
.btn-primary{background:var(--accent); color:#fff; border-color:transparent; font-weight:600; transition:background .15s ease, transform .05s ease}
.btn-primary:hover{background:var(--accent-600)}
.btn-primary:active{transform:translateY(1px)}
.btn-primary:disabled{opacity:.6; cursor:not-allowed}
.panel-actions{display:flex; justify-content:flex-end}

/* 유령 버튼 (주간 네비게이션) */
.btn-ghost{background:#fff; border:1px dashed var(--border); font-weight: 400}


/* 풀폭 버튼 */
.btn-fill{
  display:block; width:100%; padding:12px 14px; border:1px solid var(--border);
  border-radius:10px; background:#f2f2f2; color:#111; text-align:center; font-weight:600;
  cursor:pointer; transition:background .15s ease, transform .05s ease;
}

/* 엑셀 다운로드(초록) */
.btn-excel{
  background:#107C41; color:#fff; border-color:transparent;
  transition:background .15s ease, transform .05s ease;
}
.btn-excel:hover{background:#16a34a}
.btn-excel:active{transform:translateY(1px)}
.btn-excel:disabled{opacity:.6; cursor:not-allowed}

/* 상호작용 상태 */
.btn-fill:hover{background:#eaeaea}
.btn-fill:active{transform:translateY(1px)}
.btn-fill:disabled{opacity:.6; cursor:not-allowed}

/* 카드 액션 영역 보정 */
.card .actions{display:block}
.card .actions .btn-fill{width:100%}

/* =========================
   Selects
========================= */
.sel{
  padding:8px 10px; border:1px solid var(--border); border-radius:10px; font-size:14px; background:#fff; color:var(--text);
}

/* =========================
   Cards
========================= */
.card{
  border:1px solid var(--border); border-radius:14px; padding:14px; background:#fff;
}
.card .actions{margin-top:10px; display:flex; justify-content:flex-end}
.btn{display:inline-block} /* a, button 모두 모양 안정화 */

/* =========================
   Badges
========================= */
.badge{
  display:inline-block; padding:2px 8px; border-radius:999px;
  font-weight:normal; font-size:12px; background:#eee; color:inherit;
}
.badge--accent{background:var(--accent); color:#4f46e5}
.big-badge{font-size:15px; padding:4px 10px; border-radius:999px; background:#eee}

/* =========================
   Tables – Generic (.tbl)
========================= */
.tbl{width:100%; border-collapse:collapse; min-width:0}
.tbl th,.tbl td{border-bottom:1px solid var(--border); padding:10px 12px; text-align:right}
.tbl th:first-child,.tbl td:first-child{text-align:left}
.tbl th.neg,.tbl td.neg{color:var(--danger)}
.tbl th.acc,.tbl td.acc{color:var(--accent)}

/* =========================
   Tables – Sticky (Converter scope)
========================= */
.table-wrap{overflow:auto; border:1px solid var(--border); border-radius:10px; scrollbar-gutter:stable; margin-top: 12px;}
.table-wrap > table{width:100%; border-collapse:separate; border-spacing:0; min-width:1200px}
.table-wrap thead th{
  position:sticky; top:0; background:var(--thead); color:var(--text);
  text-align:left; font-weight:600; font-size:12px; letter-spacing:.02em; cursor:pointer; user-select:none;
}
.table-wrap tbody td{background:#fff; font-size:13px; color:var(--text)}
.table-wrap tbody tr:nth-child(even) td{background:var(--row-alt)}
.table-wrap .total-row td{background:#fffbe6; font-weight:700; border-top:2px solid #e8d27c}
.table-wrap th.sort-asc::after{content:" ▲"; color:var(--muted); font-weight:400}
.table-wrap th.sort-desc::after{content:" ▼"; color:var(--muted); font-weight:400}

/* 컨버터 테이블 첫 열 좁게(#tbl 전용) */
#tbl thead th:first-child,#tbl tbody td:first-child{
  white-space:nowrap; word-break:keep-all; width:56px; padding-left:6px; padding-right:6px; text-align:center;
}

/* Sticky responsive 최소 너비 단계 */
@media (max-width:1024px){ .table-wrap > table{min-width:900px} }
@media (max-width:768px){
  .table-wrap > table{min-width:720px}
  .table-wrap thead th,.table-wrap tbody td{padding:8px 10px; font-size:12px}
}
@media (max-width:480px){ .table-wrap > table{min-width:600px} }

/* =========================
   Reporting Scope (.report-table)
========================= */
.report-table .tbl thead th{border-bottom:1px solid var(--border-strong) !important}
.report-table .tbl tbody td{border-bottom:1px solid var(--grid) !important}
.report-table .tbl tbody tr:hover td{background:var(--row-hover) !important}
.report-table .tbl .total-row td{
  background:#fffbe6; border-top:1px solid #e8d27c !important; border-bottom:0 !important; font-weight:700;
}
/* 연도 경계선 */
.report-table .tbl tr.year-split td{border-top:2px solid var(--border-strong) !important}
/* 첫 컬럼 제외, 숫자 열 최소폭/정렬 */
.report-table .tbl th:nth-child(n+2), .report-table .tbl td:nth-child(n+2){min-width:110px; text-align:right}
/* (선택) 세로 구분선 */
.report-table.report-vertlines .tbl td + td, .report-table.report-vertlines .tbl th + th{border-left:1px dashed #ededed}

/* 주간 미리보기 */
.report-table .table-wrap .tbl#weekly-preview td,
.report-table .table-wrap .tbl#weekly-preview th{border-bottom:1px solid var(--grid)}
.report-table .table-wrap .tbl#weekly-preview tbody tr:hover td{background:var(--row-hover)}

/* =========================
   Weekly Report (Scoped)
========================= */
.weekly-card{padding:14px; border:1px solid var(--border); border-radius:14px; background:#fff}
.weekly-title{font-size:16px; font-weight:700}
.weekly-sub{color:var(--muted); font-size:12px}
.chips{display:flex; gap:6px; flex-wrap:wrap}
.chip{background:#f6f7fb; border:1px solid var(--border); border-radius:999px; padding:6px 10px; font-size:12px; cursor:pointer}
.chip b{font-size:13px}
.kbd{
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
  font-size:11px; padding:2px 6px; border:1px solid var(--border); border-bottom-width:2px; border-radius:6px; background:#fff;
}
.copy-toast{
  position:fixed; text-align: center; right:14px; bottom:14px; background: rgb(17 17 17 / 60%);backdrop-filter: blur(6px); color:#fff;
  padding:10px 12px; border-radius:10px; opacity:0; transform:translateY(6px);
  transition:.18s; pointer-events:none;
}
.copy-toast.on{opacity:1; transform:translateY(0)}

/* KPI 카드 그리드 */
.weekly-kpis{
  display:grid; grid-template-columns:repeat(7,minmax(0,1fr)); gap:8px; margin:6px 0 12px;
}
.weekly-kpis .kpi{
  background:#fff; border:1px solid var(--border); border-radius:10px; padding:10px 12px;
  display:flex; justify-content:space-between; align-items:baseline;
}
.weekly-kpis .kpi .kpi-label{color:var(--muted); font-size:12px}
.weekly-kpis .kpi.neg b{color:var(--danger)}
.weekly-kpis .kpi.strong b{font-size:16px}
@media (max-width:1000px){ .weekly-kpis{grid-template-columns:repeat(3,minmax(0,1fr))} }
@media (max-width:600px){ .weekly-kpis{grid-template-columns:repeat(2,minmax(0,1fr))} }

/* =========================
   Motion Preferences
========================= */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important}
}

/* =====================================================
   PAYSTAT 전용 — 주간/기간 컨트롤 통합 (중복 제거판)
   대상: #quick-buttons, #weekly-buttons, .weekly-controls, .weekly-range, .weekly-head
===================================================== */

/* iOS 텍스트 자동확대 방지 */
html { -webkit-text-size-adjust: 100%; }

/* ----- 주간 헤더(제목/부제 + 컨트롤) ----- */
.weekly-head{
  display:grid;
  grid-template-columns:1fr auto;     /* 좌: meta, 우: controls */
  grid-template-areas:"meta controls";
  align-items:end;
  gap:12px;
}
.weekly-head > div:first-child{
  grid-area:meta;
  display:flex; flex-direction:column; gap:2px;
  min-width:0;
}
.weekly-head .paneltitle{ line-height:1.25; font-size:clamp(15px, 2.2vw, 18px); }
.weekly-sub{ font-size:clamp(12px, 1.8vw, 13px); color:var(--muted); }

/* 제목/부제 줄바꿈 허용 */
.weekly-head .paneltitle,
.weekly-head .weekly-sub{
  white-space:normal; word-break:keep-all; overflow-wrap:anywhere;
}

/* ----- 공통: 컨트롤 래퍼 기본(데스크톱) ----- */
:is(#quick-buttons, #weekly-buttons, .weekly-controls){
  display:flex; align-items:center; justify-content:flex-end;
  gap:8px 10px; flex-wrap:wrap; margin-left:auto;
}

/* 공통: 기간 묶음(.range) & 라벨/입력 */
:is(#quick-buttons, #weekly-buttons) .range{
  display:flex; align-items:center; gap:6px; flex-wrap:wrap;
}
:is(#quick-buttons, #weekly-buttons) .range label{
  display:flex; align-items:center; gap:6px;
}
:is(#quick-buttons, #weekly-buttons) .range > span{ width:1.2rem; text-align:center; }
:is(#quick-buttons, #weekly-buttons) .range input[type="date"],
:is(#quick-buttons, #weekly-buttons) .range input[type="month"],
:is(#quick-buttons, #weekly-buttons) .range input[type="number"]{ min-width:12ch; }

/* 주간 네비(◀ ▶) */
:is(#weekly-buttons, .weekly-controls) .week-nav{
  display:flex; gap:6px; align-items:center;
}

/* 주간 전용: 기본 가로 */
.weekly-range{ display:flex; align-items:center; gap:6px; }

/* ===== 모바일(≤700px) : 스택/2열 그리드 공통화 ===== */
@media (max-width:700px){
  .weekly-head{
    grid-template-columns:1fr;
    grid-template-areas:
      "meta"
      "controls";
    align-items:stretch;
  }

  :is(#quick-buttons, #weekly-buttons, .weekly-controls){
    display:grid;
    grid-template-columns:1fr 1fr;   /* 2열 */
    grid-auto-rows:auto;
    gap:8px;
    justify-items:stretch;
    margin-left:0;
  }

  :is(#quick-buttons, #weekly-buttons) .range{
    grid-column:1 / -1;
    display:grid;
    grid-template-columns:1fr auto 1fr;   /* [시작] [~] [종료] */
    column-gap:6px; row-gap:6px; align-items:end; width:100%;
  }
  :is(#quick-buttons, #weekly-buttons) .range label{
    display:flex; flex-direction:column; gap:4px; font-size:12px; min-width:0;
  }
  :is(#quick-buttons, #weekly-buttons) .range input[type="date"],
  :is(#quick-buttons, #weekly-buttons) .range input[type="month"],
  :is(#quick-buttons, #weekly-buttons) .range input[type="number"]{
    width:100%; min-width:0;            /* iOS 최소폭 이슈 방지 */
  }

  :is(#quick-buttons, #weekly-buttons) > .btn.btn-primary{
    grid-column:1 / -1; width:100%;
  }
  :is(#quick-buttons, #weekly-buttons) > .btn{
    width:100%; min-width:0;
  }
  :is(#quick-buttons, #weekly-buttons) > .btn-excel,
  :is(#quick-buttons, #weekly-buttons) > label.small{
    grid-column:1 / -1;
  }

  /* 주간 폼: 날짜줄/액션 2단 */
  .weekly-controls{
    grid-template-areas:
      "range range"
      "actions actions";
  }
  .weekly-range{ grid-area:range; }
  .weekly-controls .left-group{
    grid-area:actions;
    display:grid; grid-template-columns:1fr 1fr; gap:6px; width:100%;
  }
  .weekly-controls .left-group .btn{ width:100%; min-width:0; }
  .weekly-controls .left-group label.small{ grid-column:1 / -1; }
}

/* ===== 초소형(≤420px, ≤360px) ===== */
@media (max-width:420px){
  .weekly-range label.small{ display:none; }
}
@media (max-width:360px){
  :is(#quick-buttons, #weekly-buttons) .range{
    grid-template-columns:1fr;
  }
  :is(#quick-buttons, #weekly-buttons) .range > span{ display:none; }
  #btnPrevWeek{ justify-self:start; }
  #btnNextWeek{ justify-self:end; }
}

/* ===== 주간 컨트롤: 추가 유연 레이아웃 (공용 버튼 매트릭스) ===== */
@media (max-width:700px){
  .weekly-controls .left-group{
    display:grid; grid-template-columns:1fr 1fr; gap:6px; width:100%;
  }
  .weekly-controls .left-group label.small{ grid-column:1 / -1; }
  .weekly-controls .left-group .btn{ width:100%; min-width:0; }
}

/* ===== 주간 버튼 바(#weekly-buttons) : 데스크톱 & 모바일 ===== */
#weekly-buttons{
  display:flex; align-items:flex-end; justify-content:flex-end; flex-wrap:wrap; gap:8px 10px;
}
#weekly-buttons .range{
  display:flex; align-items:center; gap:6px; flex-wrap:wrap;
}
#weekly-buttons .range label{ display:flex; align-items:center; gap:6px; }
#weekly-buttons .range > span{ width:1.2rem; text-align:center; }
#weekly-buttons .range input[type="date"]{ min-width:12ch; }
#weekly-buttons .week-nav{ display:flex; gap:6px; align-items:center; }

@media (max-width:700px){
  #weekly-buttons{
    display:grid; grid-template-columns:1fr 1fr; gap:8px; align-items:end; justify-items:stretch;
  }
  #weekly-buttons .range{
    grid-column:1 / -1;
    display:grid; grid-template-columns:1fr auto 1fr; column-gap:6px; row-gap:6px; align-items:end; width:100%;
  }
  #weekly-buttons .range label{ display:flex; flex-direction:column; gap:4px; font-size:12px; min-width:0; }
  #weekly-buttons .range input[type="date"]{ width:100%; min-width:0; }
  #weekly-buttons .week-nav{ grid-column:auto; }
  #weekly-buttons > .btn.btn-primary{ grid-column:1 / -1; width:100%; }
  #weekly-buttons > .btn{ width:100%; min-width:0; }
  #weekly-buttons > label.small{ grid-column:1 / -1; display:flex; align-items:center; gap:6px; }
}
@media (max-width:360px){
  #weekly-buttons .range{ grid-template-columns:1fr; }
  #weekly-buttons .range > span{ display:none; }
}
/* 주간 헤더를 항상 2줄(위=제목/기간, 아래=컨트롤)로 */
.weekly-head--stack{
  display: grid;
  grid-template-columns: 1fr;
  grid-template-areas:
    "meta"
    "controls";
  align-items: stretch;
  gap: 12px;
}
.weekly-head--stack .weekly-controls{
  margin-left: 0;              /* 한 줄일 때의 auto 정렬 초기화 */
  justify-content: flex-end;   /* 오른쪽 정렬 유지 */
}

/* 컨트롤 내부를 2단(기간 / 액션)으로 강제 */
.weekly-controls--two{
  display: grid;
  grid-template-areas:
    "range"
    "actions";
  row-gap: 8px;
  justify-items: stretch;
}
.weekly-controls--two .weekly-range{ grid-area: range; }
.weekly-controls--two .left-group {
  grid-area: actions;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}
.weekly-controls--two .left-group .btn{ flex: 0 0 auto; }

/* =========================
   WEEKLY FIX PACK (drop-in)
   - paste at the very end of app.css
   - scope: .panel.report-table.weekly-card
========================= */

/* 1) 데스크톱 기본: 제목/기간(좌) + 컨트롤(우) */
.panel.report-table.weekly-card .weekly-head{
  display:grid;
  grid-template-columns: 1fr auto;
  grid-template-areas: "meta controls";
  align-items:end;
  gap:12px;
}
.panel.report-table.weekly-card .weekly-head > div:first-child{
  grid-area:meta;
  display:flex; flex-direction:column; gap:2px;
  min-width:0;              /* 줄바꿈 허용 */
  word-break:keep-all;
}
.panel.report-table.weekly-card .weekly-controls{
  grid-area:controls;
  display:flex; align-items:center; gap:8px;
  flex-wrap:wrap;
  margin-left:0;            /* 기존 auto 초기화 */
  min-width:0;
}
.panel.report-table.weekly-card .weekly-range{
  display:flex; align-items:center; gap:6px;
  min-width:0;
}

/* iOS 줌 방지(모바일 입력이 16px 미만이면 확대됨) */
@media (max-width:700px){
  .panel.report-table.weekly-card input,
  .panel.report-table.weekly-card select,
  .panel.report-table.weekly-card button{ font-size:16px; }
}

/* 2) 900px 이하: 제목/기간 위줄, 컨트롤 아래줄 (두 줄 고정) */
@media (max-width:900px){
  .panel.report-table.weekly-card .weekly-head{
    grid-template-columns:1fr;
    grid-template-areas:
      "meta"
      "controls";
    align-items:stretch;
  }

  /* 컨트롤을 2단(기간 / 버튼들)으로 */
  .panel.report-table.weekly-card .weekly-controls{
    display:grid;
    grid-template-areas:
      "range"
      "actions";
    row-gap:8px;
    justify-items:stretch;
  }

  /* 기간 라인: [◀][라벨][시작][라벨][종료][▶] */
  .panel.report-table.weekly-card .weekly-range{
    grid-area:range;
    display:grid;
    grid-template-columns: auto auto minmax(0,1fr) auto minmax(0,1fr) auto;
    column-gap:6px; row-gap:6px;
    align-items:center;
    width:100%;
  }

  .panel.report-table.weekly-card .weekly-range input[type="date"]{
    width:100%; min-width:0; /* iOS 최소폭로 인한 넘침 방지 */
  }

  /* 버튼 라인: 2열 그리드 + 체크박스는 전체폭 */
  .panel.report-table.weekly-card .left-group{
    grid-area:actions;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:6px; width:100%;
  }
  .panel.report-table.weekly-card .left-group .btn{
    width:100%; min-width:0;
  }
  .panel.report-table.weekly-card .left-group label.small{
    grid-column:1 / -1;      /* 자동조회 체크박스는 한 줄 전체 */
    display:flex; align-items:center; gap:6px;
  }
}

/* 3) 480px 이하: 라벨 숨김 → 입력폭 확보, 네비는 좌/우 */
@media (max-width:480px){
  .panel.report-table.weekly-card .weekly-range label.small{ display:none; }
  /* [◀][시작][종료][▶] */
  .panel.report-table.weekly-card .weekly-range{
    grid-template-columns: auto minmax(0,1fr) minmax(0,1fr) auto;
  }
}

/* 4) 아주 좁은 화면(≤360px): 여유 있는 2~3행 배치 */
@media (max-width:360px){
  .panel.report-table.weekly-card .weekly-range{
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto auto auto;
    column-gap:6px; row-gap:6px;
  }
  #btnPrevWeek{ grid-column:1 / 2; grid-row:3; justify-self:start; }
  #btnNextWeek{ grid-column:2 / 3; grid-row:3; justify-self:end; }
}

/* 5) 자잘한 깨짐 방지 */
.panel.report-table.weekly-card .paneltitle{ 
  line-height:1.25; font-size:clamp(15px, 2.2vw, 18px);
}
.panel.report-table.weekly-card .weekly-sub{
  font-size:clamp(12px, 1.8vw, 13px);
  white-space:normal; overflow-wrap:anywhere;
}
.panel.report-table.weekly-card .btn{ 
  display:inline-flex; align-items:center; justify-content:center;
}
.panel.report-table.weekly-card input[type="date"]{
  min-width:0; /* grid 안에서 넘침 방지 */
}

/* 주간 기간 선택자: 좁을 때 풀폭으로 채우기 */
@media (max-width: 900px){
  /* 컨트롤을 2단(기간 / 액션)으로 고정 */
  .panel.report-table.weekly-card .weekly-controls{
    display:grid;
    grid-template-areas: "range" "actions";
    row-gap:8px;
    justify-items:stretch;
  }
  /* [◀][시작][~][종료][▶] 그리드로 풀폭 배치 */
  .panel.report-table.weekly-card .weekly-range{
    grid-area:range;
    display:grid;
    grid-template-columns: auto minmax(0,1fr) auto minmax(0,1fr) auto;
    column-gap:6px;
    align-items:end;
    width:100%;
  }
  .panel.report-table.weekly-card .weekly-range input[type="date"]{
    width:100%;
    min-width:0;  /* 그리드 안에서 잘 줄어들도록 */
  }
  /* 액션 버튼들도 2열로 꽉 채우기 */
  .panel.report-table.weekly-card .left-group{
    grid-area:actions;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:6px;
    width:100%;
  }
  .panel.report-table.weekly-card .left-group .btn{
    width:100%;
    min-width:0;
  }
}

/* 아주 좁은 화면에서는 라벨 숨기고 입력 폭 최대화 */
@media (max-width: 480px){
  .panel.report-table.weekly-card .weekly-range label.small{ display:none; }
  /* [◀][시작][종료][▶] */
  .panel.report-table.weekly-card .weekly-range{
    grid-template-columns: auto minmax(0,1fr) minmax(0,1fr) auto;
  }
}

/* 주간 결제보고 폼을 '기간별 통계' 폼 레이아웃과 동일하게 */
#weekly-buttons{
  display:flex; align-items:flex-end; justify-content:flex-end;
  flex-wrap:wrap; gap:8px 10px;
}
#weekly-buttons .range{
  display:flex; align-items:center; gap:6px; flex-wrap:wrap;
}
#weekly-buttons .range label{ display:flex; align-items:center; gap:6px; }
#weekly-buttons .range > span{ width:1.2rem; text-align:center; }
#weekly-buttons .range input[type="date"]{ min-width:12ch; }

/* 화면이 좁아지면: 기간 선택자 풀폭 + 버튼도 2열 풀폭 (기간별 통계와 동일) */
@media (max-width:700px){
  #weekly-buttons{
    display:grid; grid-template-columns:1fr 1fr;
    gap:8px; align-items:end; justify-items:stretch;
  }
  #weekly-buttons .range{
    grid-column:1 / -1;
    display:grid; grid-template-columns:1fr auto 1fr; /* [시작][~][종료] */
    column-gap:6px; row-gap:6px; align-items:end; width:100%;
  }
  #weekly-buttons .range label{
    display:flex; flex-direction:column; gap:4px; font-size:12px; min-width:0;
  }
  #weekly-buttons .range input[type="date"]{ width:100%; min-width:0; }
  #weekly-buttons .week-nav{ grid-column:auto; }
  #weekly-buttons > .btn.btn-primary{ grid-column:1 / -1; width:100%; }
  #weekly-buttons > .btn{ width:100%; min-width:0; }
  #weekly-buttons > label.small{ grid-column:1 / -1; display:flex; align-items:center; gap:6px; }
}

/* 아주 좁을 때: 라벨 숨기고 입력 최대화 */
@media (max-width:480px){
  #weekly-buttons .range label.small{ display:none; }
  #weekly-buttons .range{
    grid-template-columns:auto minmax(0,1fr) minmax(0,1fr) auto; /* [◀][시작][종료][▶] */
  }
}
@media (max-width:360px){
  #weekly-buttons .range{ grid-template-columns:1fr; }
  #weekly-buttons .range > span{ display:none; }
}

/* footer right-aligned button + responsive wrap */
.footer-bar{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px;
}
.footer-bar .meta{
  display:flex; flex-wrap:wrap; gap:8px; align-items:center;
}
.footer-bar .actions{
  margin-left:auto; /* → 오른쪽 정렬 */
}
.footer-bar .actions .btn-ghost.small{
  display:inline-block; padding:6px 10px; line-height:1.2;
  border:1px solid var(--border, #ddd); border-radius:6px;
  background:transparent; text-decoration:none; white-space:nowrap;
}
.footer-bar .actions .btn-ghost.small:hover{
  background:var(--card, #f7f7f7);
}

/* base: 데스크톱 */
.footer-bar{ display:flex; flex-wrap:wrap; align-items:center; gap:8px; }
.footer-bar .meta{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.footer-bar .actions{ margin-left:auto; } /* 오른쪽 배치 */

/* mobile: 한 줄 내려가서 버튼 풀폭 */
@media (max-width: 640px){
  .footer-bar .actions{
    flex-basis:100%;
    margin-left:0;
  }
  .footer-bar .actions a{
    display:block;
    width:100%;
    text-align:center;
    padding:12px 14px;   /* 터치 영역 확대 */
    border-radius:10px;
  }
}

/* --- 업로더 파일목록/버튼 --- */
.file-uploader-ops{ display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; }
.filelist{ list-style:none; padding:0; margin:8px 0 0; }
.filelist li{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:6px 10px; border:1px solid var(--border,#ddd);
  border-radius:8px; background:var(--card,#f7f7f7); font-size:12px;
}
.filelist .name{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.filelist .meta{ color:var(--muted,#666); margin-left:auto; margin-right:6px; }
.filelist .rm{
  border:0; background:transparent; cursor:pointer; padding:4px 6px;
  border-radius:6px;
}
.filelist .rm:hover{ background:rgba(0,0,0,.05); }

/* 모바일: 목록 항목 세로 쌓임 */
@media (max-width:640px){
  .filelist li{ flex-wrap:wrap; }
  .filelist .meta{ margin-left:0; }
}

/* 업로드 파일 개수 배지 */
.count-pill{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  background:var(--card, #f7f7f7);
  border:1px solid var(--border, #ddd);
  font-size:12px; line-height:1.2;
  white-space:nowrap;
  vertical-align:middle;
}
